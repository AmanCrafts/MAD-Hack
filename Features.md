# PROJECT OVERVIEW: **SkillBites – Micro-Learning Platform**

**Goal:**
A mini edtech app that delivers short lessons (topics), lets users take quick quizzes, track their learning progress, maintain streaks, and get personalized topic recommendations.

---

# 1. HIGH-LEVEL APP STRUCTURE

Let’s first visualize the structure:

```
skillbites/
│
├── prisma/
│   ├── schema.prisma        ← Your Prisma schema
│   └── migrations/           ← Auto-generated by Prisma migrate
│
├── src/
│   ├── app/                  ← Next.js or Express app routes
│   │   ├── api/
│   │   │   ├── topics/
│   │   │   ├── quizzes/
│   │   │   ├── users/
│   │   │   ├── progress/
│   │   │   ├── bookmarks/
│   │   │   ├── streaks/
│   │   │   └── recommendations/
│   │   └── page.tsx
│   │
│   ├── components/           ← Reusable UI components
│   ├── hooks/                ← Custom React hooks
│   ├── lib/
│   │   ├── prisma.ts         ← Prisma client instance
│   │   ├── utils.ts          ← Helper functions
│   │   ├── recommendation.ts ← Recommendation logic
│   │   └── streak.ts         ← Streak calculation helpers
│   │
│   ├── services/             ← Business logic layer
│   │   ├── topicService.ts
│   │   ├── quizService.ts
│   │   ├── progressService.ts
│   │   └── userService.ts
│   │
│   ├── types/                ← TypeScript interfaces
│   └── middleware/           ← Auth, logging, etc.
│
├── .env                      ← Database credentials
├── package.json
└── README.md
```

---

# 2. HOW TO USE PRISMA IN THE APP

### Step 1: Install dependencies

```bash
npm install prisma @prisma/client
```

### Step 2: Initialize Prisma

```bash
npx prisma init
```

Then paste your schema (the one we made) into `prisma/schema.prisma`.

### Step 3: Migrate your database

```bash
npx prisma migrate dev --name init
```

### Step 4: Create Prisma client

Create a reusable client in `src/lib/prisma.ts`:

```ts
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();
export default prisma;
```

You can now use this anywhere in your app to query the database.

---

# 3. HOW EACH MODEL IS USED IN THE APP

Let’s now break down how every part of your **schema** maps to **real app functionality**.

---

## USER MODEL

### Purpose:

Stores user information, tracks progress, streaks, and bookmarks.

### Common Operations:

```ts
// Signup
await prisma.user.create({
  data: { email, password: hashedPassword, name },
});

// Login
const user = await prisma.user.findUnique({ where: { email } });
```

### In the App:

- Login/Signup page
- Dashboard showing total completed topics, last accessed topic
- Streak visualization

---

## CATEGORY MODEL

### Purpose:

Groups topics (like Programming, Aptitude, etc.)

### Common Operations:

```ts
// Fetch all categories
const categories = await prisma.category.findMany({
  include: { topics: true },
});
```

### In the App:

- Category filter in the sidebar
- Used for recommendations

---

## TOPIC MODEL

### Purpose:

Main learning unit — the short lesson.

### Common Operations:

```ts
// Browse all topics
const topics = await prisma.topic.findMany({
  include: { category: true },
  where: { difficulty: "EASY" },
});

// Get a single topic with quiz
const topic = await prisma.topic.findUnique({
  where: { id },
  include: { quizzes: { include: { options: true } } },
});
```

### In the App:

- Topic List page
- Topic Reading page
- "Next Topic" suggestions

---

## QUIZ & QUIZOPTION MODELS

### Purpose:

MCQs tied to each topic.

### Common Operations:

```ts
// Fetch quiz for a topic
const quizzes = await prisma.quiz.findMany({
  where: { topicId },
  include: { options: true },
});
```

### In the App:

- Appears after reading a topic
- Displays score, feedback, correct answers

---

## TOPIC PROGRESS MODEL

### Purpose:

Tracks a user’s status and time on each topic.

### Common Operations:

```ts
// Mark topic as in progress
await prisma.topicProgress.upsert({
  where: { userId_topicId: { userId, topicId } },
  update: { status: "IN_PROGRESS", lastAccessed: new Date() },
  create: { userId, topicId, status: "IN_PROGRESS" },
});

// Mark topic as completed
await prisma.topicProgress.update({
  where: { userId_topicId: { userId, topicId } },
  data: { status: "COMPLETED", completedAt: new Date() },
});
```

### In the App:

- “Continue Learning” section on dashboard
- Progress bars for each topic

---

## BOOKMARK MODEL

### Purpose:

Lets users save topics for later.

### Common Operations:

```ts
await prisma.bookmark.create({
  data: { userId, topicId },
});
```

### In the App:

- “Saved Topics” section

---

## STREAK MODEL

### Purpose:

Tracks daily learning activity (for “You’re on a 5-day streak!”)

### Common Operations:

```ts
await prisma.streak.upsert({
  where: { userId_date: { userId, date: new Date().toDateString() } },
  update: {},
  create: { userId, date: new Date() },
});
```

### In the App:

- Streak counter
- Streak calendar visualization

---

## RECENT ACTIVITY MODEL

### Purpose:

Records actions like “started topic”, “completed topic” — used for recommendations.

### Common Operations:

```ts
await prisma.recentActivity.create({
  data: { userId, topicId, action: "COMPLETED" },
});
```

### In the App:

- “Continue from where you left off” section
- Used to generate next topic recommendation

---

## TOPIC SEARCH INDEX MODEL

### Purpose:

Optimizes search performance.

### How to Use:

- Sync this table whenever a topic is created or updated
- Then use Prisma’s text filtering for search:

```ts
const results = await prisma.topicSearchIndex.findMany({
  where: {
    OR: [
      { title: { contains: query, mode: "insensitive" } },
      { description: { contains: query, mode: "insensitive" } },
    ],
  },
  include: { topic: true },
});
```

---

# 4. FEATURE-TO-MODEL MAPPING

| Feature        | Models Involved                             | Example Route          |
| -------------- | ------------------------------------------- | ---------------------- |
| Browse Topics  | `Topic`, `Category`                         | `/api/topics`          |
| Take Quiz      | `Quiz`, `QuizOption`, `TopicProgress`       | `/api/quiz/submit`     |
| Track Progress | `TopicProgress`                             | `/api/progress/update` |
| Dashboard      | `TopicProgress`, `RecentActivity`, `Streak` | `/api/dashboard`       |
| Streak         | `Streak`                                    | `/api/streaks`         |
| Bookmarks      | `Bookmark`                                  | `/api/bookmarks`       |
| Recommendation | `RecentActivity`, `Topic`, `Category`       | `/api/recommendations` |
| Search         | `TopicSearchIndex`                          | `/api/search`          |

---

# 5. APP FLOW DIAGRAM

```
User logs in
   ↓
Dashboard shows → Completed Topics, Last Accessed Topic, Streaks
   ↓
Browse Topics by Category / Difficulty / Search
   ↓
Click on Topic → Read Content → Start Quiz
   ↓
Submit Quiz → See Score & Feedback
   ↓
Mark Topic as Completed → Update Progress & Streak
   ↓
“Next Topic” is recommended based on last category/difficulty
```

---

# 6. RECOMMENDATION LOGIC (Simplified Example)

`src/lib/recommendation.ts`

```ts
import prisma from "./prisma";

export async function suggestNextTopic(userId: string) {
  const recent = await prisma.recentActivity.findFirst({
    where: { userId },
    orderBy: { createdAt: "desc" },
    include: { topic: true },
  });

  if (!recent) return null;

  const { categoryId, difficulty } = recent.topic;

  return await prisma.topic.findFirst({
    where: {
      categoryId,
      difficulty,
      progresses: {
        none: { userId, status: "COMPLETED" },
      },
    },
  });
}
```

This recommends the **next uncompleted topic** from the **same category and difficulty** as the last completed one.

---

# 7. DEPLOYMENT & DB CONNECTION

In your `.env`:

```bash
DATABASE_URL="postgresql://username:password@localhost:5432/skillbites"
```

Then run:

```bash
npx prisma migrate deploy
```

And you’re live.

---

# 8. TECH STACK SUMMARY

| Layer     | Technology                              |
| --------- | --------------------------------------- |
| Frontend  | React + Next.js + Tailwind              |
| Backend   | Node.js + Next.js API routes or Express |
| Database  | PostgreSQL                              |
| ORM       | Prisma                                  |
| Auth      | NextAuth.js / JWT                       |
| Hosting   | Vercel or Render                        |
| Analytics | Prisma + custom streak tracking         |

---

# 9. TEAM RESPONSIBILITIES (example split)

| Role               | Responsibilities                     |
| ------------------ | ------------------------------------ |
| Backend Developer  | APIs, Prisma models, business logic  |
| Frontend Developer | UI for lessons, quizzes, dashboards  |
| Designer           | App layout, icons, responsive design |
| Data Engineer      | Recommendation logic, analytics      |
| PM                 | Feature mapping, progress tracking   |

---

# TL;DR SUMMARY

| Concept          | Description                                             |
| ---------------- | ------------------------------------------------------- |
| Prisma schema    | Defines data structure for topics, users, quizzes, etc. |
| Prisma client    | Used to query DB (CRUD operations)                      |
| Folder structure | Separates app logic (lib, services, components)         |
| Models           | Map directly to app features                            |
| Recommendation   | Based on category + difficulty of recent topics         |
| Trackable        | Progress, bookmarks, streaks, quizzes, activities       |

---
